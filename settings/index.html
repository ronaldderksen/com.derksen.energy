<!DOCTYPE html>
<html>
  <head>
    <!-- The '/homey.js' script must be included in your settings view to work -->
    <script
      type="text/javascript"
      src="/homey.js"
      data-origin="settings"
    ></script>
  </head>
  <body>
    <header class="homey-header">
      <h1 class="homey-title" data-i18n="settings.title"></h1>
    </header>

    <legend class="homey-form-legend" data-i18n="settings.enever_title"></legend>

    <div class="homey-form-group">
      <label class="homey-form-label" for="token" data-i18n="settings.token"></label>
      <input class="homey-form-input" id="token" type="text" value="" />
    </div>

    <label class="homey-form-label" for="select-example" data-i18n="settings.supplier"></label>
    <select class="homey-form-select" name="select-example" id="supplier">
      <option value="aip" data-i18n="suppliers.aip"></option>
      <option value="anwb" data-i18n="suppliers.anwb"></option>
      <option value="ee" data-i18n="suppliers.ee"></option>
      <option value="evo" data-i18n="suppliers.evo"></option>
      <option value="ez" data-i18n="suppliers.ez"></option>
      <option value="fr" data-i18n="suppliers.fr"></option>
      <option value="gsl" data-i18n="suppliers.gsl"></option>
      <option value="mde" data-i18n="suppliers.mde"></option>
      <option value="ne" data-i18n="suppliers.ne"></option>
      <option value="ti" data-i18n="suppliers.ti"></option>
      <option value="vdb" data-i18n="suppliers.vdb"></option>
      <option value="von" data-i18n="suppliers.von"></option>
      <option value="zg" data-i18n="suppliers.zg"></option>
      <option value="zp" data-i18n="suppliers.zp"></option>
    </select>

    <button id="save" class="homey-button-primary-full" data-i18n="settings.save"></button>

    <script type="text/javascript">
      // a method named 'onHomeyReady' must be present in your code
      function onHomeyReady(Homey) {
        var tokenElement = document.getElementById("token");
        var supplierElement = document.getElementById("supplier");
        var saveElement = document.getElementById("save");

        Homey.get("token", function (err, token) {
          if (err) return Homey.alert(err);
          tokenElement.value = token;
        });

        saveElement.addEventListener("click", function (e) {
          Homey.set("token", tokenElement.value, function (err) {
            if (err) return Homey.alert(err);
          });
        });

        Homey.get("supplier", function (err, supplier) {
          if (err) return Homey.alert(err);
          supplierElement.value = supplier;
        });

        saveElement.addEventListener("click", function (e) {
          Homey.set("supplier", supplierElement.value, function (err) {
            if (err) return Homey.alert(err);
          });
        });

        // Tell Homey we're ready to be displayed
        Homey.ready();
      }
    </script>

  </body>
</html>
